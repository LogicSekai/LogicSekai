import{d as x,e as O,c as P}from"./9P9GaFzr.js";import{a as k,f as w,E as G,b as M}from"./CD_9I7Q7.js";import{P as N}from"./C-_J5zdQ.js";import{g as V,Y as _,m as d,z as A,o as $,w as b,b as D,y as u,A as U}from"./C8_oyFXb.js";const[H,Y]=P("RovingFocusGroup"),J=V({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(F,{expose:I,emit:T}){const a=F,p=T,{loop:C,orientation:f,dir:S}=_(a),v=k(S),i=x(a,"currentTabStopId",p,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),n=d(!1),r=d(!1),l=d(0),{getItems:m,CollectionSlot:g}=O({isProvider:!0});function y(e){const o=!r.value;if(e.currentTarget&&e.target===e.currentTarget&&o&&!n.value){const s=new CustomEvent(G,M);if(e.currentTarget.dispatchEvent(s),p("entryFocus",s),!s.defaultPrevented){const c=m().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),B=c.find(t=>t.getAttribute("data-active")===""),R=c.find(t=>t.id===i.value),h=[B,R,...c].filter(Boolean);w(h,a.preventScrollOnEntryFocus)}}r.value=!1}function E(){setTimeout(()=>{r.value=!1},1)}return I({getItems:m}),Y({loop:C,dir:v,orientation:f,currentTabStopId:i,onItemFocus:e=>{i.value=e},onItemShiftTab:()=>{n.value=!0},onFocusableItemAdd:()=>{l.value++},onFocusableItemRemove:()=>{l.value--}}),(e,o)=>($(),A(u(g),null,{default:b(()=>[D(u(N),{tabindex:n.value||l.value===0?-1:0,"data-orientation":u(f),as:e.as,"as-child":e.asChild,dir:u(v),style:{outline:"none"},onMousedown:o[0]||(o[0]=s=>r.value=!0),onMouseup:E,onFocus:y,onBlur:o[1]||(o[1]=s=>n.value=!1)},{default:b(()=>[U(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{J as _,H as i};
