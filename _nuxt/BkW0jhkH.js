import{c as C,P as B}from"./C-_J5zdQ.js";import{s as b,u as k,x as I}from"./9P9GaFzr.js";import{m as h,M as O,D as m,r as T,g as x,I as y,z as F,o as S,w as W,A as _,y as p,$ as A}from"./C8_oyFXb.js";/**
 * @license lucide-vue-next v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=C("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function L(o,t,i){const s=i.originalEvent.target,a=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:i});t&&s.addEventListener(o,t,{once:!0}),s.dispatchEvent(a)}const z="dismissableLayer.pointerDownOutside",R="dismissableLayer.focusOutside";function g(o,t){const i=t.closest("[data-dismissable-layer]"),s=o.dataset.dismissableLayer===""?o:o.querySelector("[data-dismissable-layer]"),a=Array.from(o.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(i&&s===i||a.indexOf(s)<a.indexOf(i))}function M(o,t){var n;const i=((n=t==null?void 0:t.value)==null?void 0:n.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=h(!1),a=h(()=>{});return O(d=>{if(!b)return;const r=async c=>{const E=c.target;if(t!=null&&t.value){if(g(t.value,E)){s.value=!1;return}if(c.target&&!s.value){let D=function(){L(z,o,w)};const w={originalEvent:c};c.pointerType==="touch"?(i.removeEventListener("click",a.value),a.value=D,i.addEventListener("click",a.value,{once:!0})):D()}else i.removeEventListener("click",a.value);s.value=!1}},f=window.setTimeout(()=>{i.addEventListener("pointerdown",r)},0);d(()=>{window.clearTimeout(f),i.removeEventListener("pointerdown",r),i.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>s.value=!0}}function K(o,t){var a;const i=((a=t==null?void 0:t.value)==null?void 0:a.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=h(!1);return O(n=>{if(!b)return;const d=async r=>{t!=null&&t.value&&(await m(),await m(),!(!t.value||g(t.value,r.target))&&r.target&&!s.value&&L(R,o,{originalEvent:r}))};i.addEventListener("focusin",d),n(()=>i.removeEventListener("focusin",d))}),{onFocusCapture:()=>s.value=!0,onBlurCapture:()=>s.value=!1}}const l=T({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X=x({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(o,{emit:t}){const i=o,s=t,{forwardRef:a,currentElement:n}=k(),d=y(()=>{var e;return((e=n.value)==null?void 0:e.ownerDocument)??globalThis.document}),r=y(()=>l.layersRoot),f=y(()=>n.value?Array.from(r.value).indexOf(n.value):-1),c=y(()=>l.layersWithOutsidePointerEventsDisabled.size>0),E=y(()=>{const e=Array.from(r.value),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),u=e.indexOf(v);return f.value>=u}),D=M(async e=>{const v=[...l.branches].some(u=>u==null?void 0:u.contains(e.target));!E.value||v||(s("pointerDownOutside",e),s("interactOutside",e),await m(),e.defaultPrevented||s("dismiss"))},n),w=K(e=>{[...l.branches].some(u=>u==null?void 0:u.contains(e.target))||(s("focusOutside",e),s("interactOutside",e),e.defaultPrevented||s("dismiss"))},n);I("Escape",e=>{f.value===r.value.size-1&&(s("escapeKeyDown",e),e.defaultPrevented||s("dismiss"))});let P;return O(e=>{n.value&&(i.disableOutsidePointerEvents&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(P=d.value.body.style.pointerEvents,d.value.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(n.value)),r.value.add(n.value),e(()=>{i.disableOutsidePointerEvents&&l.layersWithOutsidePointerEventsDisabled.size===1&&(d.value.body.style.pointerEvents=P)}))}),O(e=>{e(()=>{n.value&&(r.value.delete(n.value),l.layersWithOutsidePointerEventsDisabled.delete(n.value))})}),(e,v)=>(S(),F(p(B),{ref:p(a),"as-child":e.asChild,as:e.as,"data-dismissable-layer":"",style:A({pointerEvents:c.value?E.value?"auto":"none":void 0}),onFocusCapture:p(w).onFocusCapture,onBlurCapture:p(w).onBlurCapture,onPointerdownCapture:p(D).onPointerDownCapture},{default:W(()=>[_(e.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}});export{N as X,X as _,l as c,L as h};
