import{h as T,y as w,u as g,s as C}from"./9P9GaFzr.js";import{f as m,A as F,a as x,g as k,b as y,E as b,c as I}from"./BuXJJIhO.js";import{m as O,g as K,r as P,M as L,D as U,z as N,o as D,w as M,A as R,y as Y}from"./C8_oyFXb.js";import{P as B}from"./C-_J5zdQ.js";const W="menu.itemSelect",A=["Enter"," "],j=["ArrowDown","PageUp","Home"],G=["ArrowUp","PageDown","End"],Z=[...j,...G];[...A],[...A];function ee(e){return e?"open":"closed"}function te(e){const t=T();for(const s of e)if(s===t||(s.focus(),T()!==t))return}function H(e,t){const{x:s,y:c}=e;let v=!1;for(let d=0,f=t.length-1;d<t.length;f=d++){const h=t[d].x,i=t[d].y,S=t[f].x,o=t[f].y;i>c!=o>c&&s<(S-h)*(c-i)/(o-i)+h&&(v=!v)}return v}function se(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return H(s,t)}function ne(e){return e.pointerType==="mouse"}const V=w(()=>O([]));function $(){const e=V();return{add(t){const s=e.value[0];t!==s&&(s==null||s.pause()),e.value=_(e.value,t),e.value.unshift(t)},remove(t){var s;e.value=_(e.value,t),(s=e.value[0])==null||s.resume()}}}function _(e,t){const s=[...e],c=s.indexOf(t);return c!==-1&&s.splice(c,1),s}function z(e){return e.filter(t=>t.tagName!=="A")}const oe=K({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const s=e,c=t,{currentRef:v,currentElement:d}=g(),f=O(null),h=$(),i=P({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});L(o=>{if(!C)return;const n=d.value;if(!s.trapped)return;function a(l){if(i.paused||!n)return;const p=l.target;n.contains(p)?f.value=p:m(f.value,{select:!0})}function E(l){if(i.paused||!n)return;const p=l.relatedTarget;p!==null&&(n.contains(p)||m(f.value,{select:!0}))}function r(l){n.contains(f.value)||m(n)}document.addEventListener("focusin",a),document.addEventListener("focusout",E);const u=new MutationObserver(r);n&&u.observe(n,{childList:!0,subtree:!0}),o(()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",E),u.disconnect()})}),L(async o=>{const n=d.value;if(await U(),!n)return;h.add(i);const a=T();if(!n.contains(a)){const r=new CustomEvent(F,b);n.addEventListener(F,u=>c("mountAutoFocus",u)),n.dispatchEvent(r),r.defaultPrevented||(x(z(k(n)),{select:!0}),T()===a&&m(n))}o(()=>{n.removeEventListener(F,l=>c("mountAutoFocus",l));const r=new CustomEvent(y,b),u=l=>{c("unmountAutoFocus",l)};n.addEventListener(y,u),n.dispatchEvent(r),setTimeout(()=>{r.defaultPrevented||m(a??document.body,{select:!0}),n.removeEventListener(y,u),h.remove(i)},0)})});function S(o){if(!s.loop&&!s.trapped||i.paused)return;const n=o.key==="Tab"&&!o.altKey&&!o.ctrlKey&&!o.metaKey,a=T();if(n&&a){const E=o.currentTarget,[r,u]=I(E);r&&u?!o.shiftKey&&a===u?(o.preventDefault(),s.loop&&m(r,{select:!0})):o.shiftKey&&a===r&&(o.preventDefault(),s.loop&&m(u,{select:!0})):a===E&&o.preventDefault()}}return(o,n)=>(D(),N(Y(B),{ref_key:"currentRef",ref:v,tabindex:"-1","as-child":o.asChild,as:o.as,onKeydown:S},{default:M(()=>[R(o.$slots,"default")]),_:3},8,["as-child","as"]))}});export{Z as F,W as I,G as L,A as S,oe as _,ne as a,te as f,ee as g,se as i};
